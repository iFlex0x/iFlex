<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iFlex</title>
    <link rel="icon" href="https://media.discordapp.net/attachments/1377937684525224000/1377937709561024603/iflexnew.png?ex=683ac7fe&is=6839767e&hm=9f2c0f8ab97dd09a6807993e34dfb0286b00806463d673e68099253d4c0e805e&=&width=666&height=666" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        html, body {
            overflow-x: hidden;
        }

        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background-color: #1a1a1a;
            color: #e0e0e0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow-y: auto;
            padding: 20px;
            box-sizing: border-box;
            position: relative;
            scroll-behavior: smooth;
            cursor: url('images/custom-pointer.png'), auto; /* Your custom cursor */
            /* Subtle background animation */
            animation: background-pulse 15s infinite alternate;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(ellipse at center, rgba(0,0,0,0) 0%, rgba(0,0,0,0.5) 70%, rgba(0,0,0,0.9) 100%);
            pointer-events: none;
            z-index: 1;
        }

        /* Particle Canvas for Background */
        #particleCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1; /* Behind all content */
            pointer-events: none; /* Allows clicks to pass through */
        }

        /* Cursor Trail Canvas */
        #cursorTrailCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1001; /* Above most content, below modals */
            pointer-events: none; /* Crucial: allows clicks to pass through */
        }

        .vignette-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(ellipse at center, rgba(0,0,0,0) 0%, rgba(0,0,0,0.2) 60%, rgba(0,0,0,0.5) 100%);
            pointer-events: none;
            z-index: 999;
        }

        .container {
            background-color: #2c2c2c;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 
                inset 5px 5px 10px rgba(0, 0, 0, 0.3),
                inset -5px -5px 10px rgba(70, 70, 70, 0.1),
                10px 10px 20px rgba(0, 0, 0, 0.6),
                -10px -10px 20px rgba(70, 70, 70, 0.05);
            text-align: center;
            max-width: 960px;
            width: 100%;
            box-sizing: border-box;
            z-index: 2;
            display: flex;
            flex-direction: column;
            gap: 40px;
            min-height: calc(100vh - 40px);
            transition: filter 0.3s ease; /* For blur effect */
        }

        /* Blur effect for container when modal is open */
        body.modal-open .container {
            filter: blur(5px);
            pointer-events: none; /* Disable interaction with blurred content */
        }

        .logo-container {
            margin-bottom: 20px;
        }
        .logo-container img {
            max-width: 250px;
            height: auto;
            display: block;
            margin: 0 auto;
            /* Initial fade-in and slight scale */
            animation: fade-in-scale 1.5s ease-out forwards;
        }

        h1 {
            font-size: 3em;
            color: #ffffff;
            margin-bottom: 20px;
            letter-spacing: 2px;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
            display: none;
        }

        .status-indicator {
            display: inline-flex;
            align-items: center;
            background-color: #444;
            color: #bbb;
            padding: 5px 15px;
            border-radius: 20px;
            box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.3), inset -2px -2px 5px rgba(70, 70, 70, 0.1);
            font-size: 0.9em;
            margin-bottom: 40px;
        }
        .dot {
            height: 10px;
            width: 10px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }
        .dot.open {
            background-color: #4CAF50;
            box-shadow: 0 0 8px #4CAF50;
            /* Pulsing animation for the green dot */
            animation: pulse 1.5s infinite alternate;
        }

        .navigation-buttons {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
            margin-bottom: 40px;
        }
        .nav-button {
            background-color: #3a3a3a;
            border-radius: 15px;
            padding: 30px 40px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #e0e0e0;
            font-size: 1.2em;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease, filter 0.3s ease; /* Added filter */
            box-shadow: 
                inset 2px 2px 5px rgba(0, 0, 0, 0.3),
                inset -2px -2px 5px rgba(70, 70, 70, 0.1),
                5px 5px 10px rgba(0, 0, 0, 0.4),
                -5px -5px 10px rgba(70, 70, 70, 0.05);
            flex: 1;
            max-width: 250px;
            min-width: 180px;
        }
        .nav-button:hover {
            background-color: #4a4a4a;
            transform: translateY(-3px) scale(1.02); /* Slight scale on hover */
            box-shadow: 
                inset 1px 1px 3px rgba(0, 0, 0, 0.4), 
                inset -1px -1px 3px rgba(70, 70, 70, 0.2),
                8px 8px 15px rgba(0, 0, 0, 0.6),
                -8px -8px 15px rgba(70, 70, 70, 0.1),
                0 0 20px rgba(76, 175, 80, 0.4); /* Green glow on hover */
            filter: brightness(1.2); /* Slight brightness increase */
        }
        .nav-button img {
            width: 100px;
            height: 100px;
            margin-bottom: 15px;
            filter: invert(1);
            opacity: 0.8;
            transition: transform 0.3s ease; /* Added transition for image */
        }
        .nav-button:hover img {
            transform: rotate(5deg); /* Subtle rotation on image hover */
        }
        .nav-button p {
            margin: 0;
        }

        footer {
            margin-top: auto;
            font-size: 0.8em;
            color: #999;
            padding-top: 20px;
            /* Ensure enough space for the back to top button and its margin */
            padding-bottom: 80px; /* Adjusted to accommodate back to top button at bottom: 30px */
        }
        footer a {
            color: #999;
            text-decoration: none;
            margin: 0 10px;
        }
        footer a:hover {
            color: #fff;
        }
        .footer-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 15px;
            flex-wrap: wrap;
        }
        .footer-button {
            background-color: #3a3a3a;
            color: #e0e0e0;
            padding: 10px 20px;
            border-radius: 10px;
            text-decoration: none;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.3), inset -2px -2px 5px rgba(70, 70, 70, 0.1);
            font-size: 0.9em;
            white-space: nowrap; /* Prevent button text from wrapping */
            box-sizing: border-box; /* Added for consistent sizing */
        }
        .footer-button:hover {
            background-color: #4a4a4a;
            transform: translateY(-2px);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
        }

        /* Scroll-Triggered Animations */
        .show-on-scroll {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .show-on-scroll.active {
            opacity: 1;
            transform: translateY(0);
        }

        .portfolio-section {
            padding: 40px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            margin-top: 40px;
        }
        .portfolio-section:first-of-type {
            border-top: none;
            margin-top: 0;
        }
        .portfolio-section h2 {
            font-size: 2.5em;
            color: #ffffff;
            margin-bottom: 40px;
            letter-spacing: 1px;
            /* Subtle text shadow animation */
            animation: text-glow 3s infinite alternate;
        }

        .thumbnail-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            justify-content: center;
        }
        .thumbnail-item {
            background-color: #3a3a3a;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 
                inset 2px 2px 5px rgba(0, 0, 0, 0.3),
                inset -2px -2px 5px rgba(70, 70, 70, 0.1),
                5px 5px 10px rgba(0, 0, 0, 0.4),
                -5px -5px 10px rgba(70, 70, 70, 0.05);
            transition: transform 0.2s ease, box-shadow 0.3s ease, filter 0.3s ease; /* Added filter */
            text-align: left;
            padding-bottom: 15px;
        }
        .thumbnail-item:hover {
            transform: translateY(-5px) scale(1.01); /* Slight scale on hover */
            box-shadow: 
                inset 1px 1px 3px rgba(0, 0, 0, 0.4), 
                inset -1px -1px 3px rgba(70, 70, 70, 0.2),
                8px 8px 15px rgba(0, 0, 0, 0.6),
                -8px -8px 15px rgba(70, 70, 70, 0.1),
                0 0 15px rgba(255, 255, 255, 0.2); /* Subtle white glow */
            filter: brightness(1.1); /* Slight brightness increase */
        }
        .thumbnail-item img {
            width: 100%;
            height: auto;
            aspect-ratio: 16 / 9;
            object-fit: cover;
            display: block;
            border-radius: 15px 15px 0 0;
            transition: transform 0.3s ease; /* Added transition for image */
        }
        .thumbnail-item:hover img {
            transform: scale(1.05); /* Zoom effect on image hover */
        }
        .thumbnail-item p {
            margin: 15px 15px 0;
            font-size: 1em;
            color: #ddd;
        }

        .contact-info {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        .email-address {
            background-color: #3a3a3a;
            padding: 15px 25px;
            border-radius: 10px;
            display: inline-block;
            font-size: 1.1em;
            color: #e0e0e0;
            box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.3), inset -2px -2px 5px rgba(70, 70, 70, 0.1);
            transition: background-color 0.3s ease, box-shadow 0.3s ease;
        }
        .email-address:hover {
            background-color: #4a4a4a;
            box-shadow: 0 0 15px rgba(255, 255, 255, 0.1); /* Subtle glow */
        }
        .social-links {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            width: 100%;
            max-width: 700px;
            margin: 0 auto;
        }
        .social-button {
            background-color: #3a3a3a;
            border-radius: 15px;
            padding: 20px 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #e0e0e0;
            font-size: 0.9em;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease, filter 0.3s ease; /* Added filter */
            box-shadow: 
                inset 2px 2px 5px rgba(0, 0, 0, 0.3),
                inset -2px -2px 5px rgba(70, 70, 70, 0.1),
                5px 5px 10px rgba(0, 0, 0, 0.4),
                -5px -5px 10px rgba(70, 70, 70, 0.05);
        }
        .social-button:hover {
            background-color: #4a4a4a;
            transform: translateY(-3px) scale(1.02); /* Slight scale on hover */
            box-shadow: 
                inset 1px 1px 3px rgba(0, 0, 0, 0.4), 
                inset -1px -1px 3px rgba(70, 70, 70, 0.2),
                8px 8px 15px rgba(0, 0, 0, 0.6),
                -8px -8px 15px rgba(70, 70, 70, 0.1),
                0 0 20px rgba(255, 255, 255, 0.3); /* White glow on hover */
            filter: brightness(1.2); /* Slight brightness increase */
        }
        .social-button img {
            width: 55px;
            height: 55px;
            object-fit: contain;
            margin-bottom: 10px;
            filter: invert(1);
            opacity: 0.8;
            transition: transform 0.3s ease; /* Added transition for image */
        }
        .social-button:hover img {
            transform: rotate(5deg); /* Subtle rotation on image hover */
        }
        .social-button p {
            margin: 0;
            text-align: center;
        }

        .brainstormer-section {
            padding: 40px 0;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            margin-top: 40px;
            text-align: center;
        }
        .brainstormer-section h2 {
            font-size: 2.5em;
            color: #ffffff;
            margin-bottom: 30px;
            letter-spacing: 1px;
            animation: text-glow 3s infinite alternate; /* Applied text glow */
        }
        .brainstormer-input-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
        }
        .brainstormer-input-area textarea {
            width: 80%;
            max-width: 600px;
            padding: 15px;
            border-radius: 10px;
            border: none;
            background-color: #3a3a3a;
            color: #e0e0e0;
            font-size: 1em;
            resize: vertical;
            min-height: 80px;
            box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.3), inset -2px -2px 5px rgba(70, 70, 70, 0.1);
            outline: none;
            transition: box-shadow 0.3s ease;
        }
        .brainstormer-input-area textarea:focus {
            box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.3), inset -2px -2px 5px rgba(70, 70, 70, 0.1), 0 0 10px rgba(76, 175, 80, 0.5); /* Green glow on focus */
        }
        .brainstormer-input-area textarea::placeholder {
            color: #bbb;
        }
        .brainstormer-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        .brainstormer-button {
            background-color: #4CAF50;
            color: #ffffff;
            padding: 15px 30px;
            border-radius: 15px;
            border: none;
            font-size: 1.1em;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .brainstormer-button:hover {
            background-color: #45a049;
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6), 0 0 25px rgba(76, 175, 80, 0.6); /* Enhanced green glow */
        }
        .brainstormer-button:disabled {
            background-color: #666;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
        }
        .brainstormer-output-area {
            background-color: #3a3a3a;
            border-radius: 15px;
            padding: 25px;
            text-align: left;
            max-height: 500px;
            overflow-y: auto;
            box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.3), inset -2px -2px 5px rgba(70, 70, 70, 0.1);
            white-space: pre-wrap; /* Ensures line breaks are respected */
            word-wrap: break-word; /* Prevents overflow for long words */
            color: #e0e0e0;
            font-size: 1em;
            line-height: 1.6;
            transition: box-shadow 0.3s ease;
            position: relative; /* For positioning copy buttons */
        }
        .loading-indicator {
            display: none;
            margin-top: 20px;
            color: #bbb;
            font-style: italic;
        }
        .loading-indicator.active {
            display: block;
            animation: bounce 0.8s infinite alternate; /* Loading animation */
        }

        .copy-button {
            background-color: #555;
            color: #eee;
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            font-size: 0.8em;
            cursor: pointer;
            margin-left: 10px;
            transition: background-color 0.2s ease;
        }
        .copy-button:hover {
            background-color: #777;
        }
        .copy-message {
            display: inline-block;
            margin-left: 10px;
            color: #4CAF50;
            font-size: 0.8em;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .copy-message.show {
            opacity: 1;
        }
        
        /* Saved Concepts Section */
        .saved-concepts-section {
            margin-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.05);
            padding-top: 30px;
        }
        .saved-concepts-section h3 {
            font-size: 1.8em;
            color: #ffffff;
            margin-bottom: 20px;
        }
        .saved-concepts-list {
            background-color: #3a3a3a;
            border-radius: 15px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
            text-align: left;
            box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.3), inset -2px -2px 5px rgba(70, 70, 70, 0.1);
        }
        .saved-concepts-list p {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
            position: relative;
        }
        .saved-concepts-list p:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        .saved-concepts-list .remove-button {
            background-color: #f44336;
            color: #fff;
            border: none;
            border-radius: 5px;
            padding: 3px 8px;
            font-size: 0.7em;
            cursor: pointer;
            margin-left: 10px;
            transition: background-color 0.2s ease;
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
        }
        .saved-concepts-list .remove-button:hover {
            background-color: #d32f2f;
        }
        .clear-all-saved {
            background-color: #f44336;
            color: #ffffff;
            padding: 10px 20px;
            border-radius: 10px;
            border: none;
            font-size: 0.9em;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        .clear-all-saved:hover {
            background-color: #d32f2f;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
        }


        .copyright-message {
            position: fixed;
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 0.9em;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            pointer-events: none;
            white-space: nowrap;
        }
        .copyright-message.show {
            opacity: 1;
        }

        #backToTopBtn {
            position: fixed;
            bottom: 30px; /* User requested value */
            left: 50%;
            transform: translateX(-50%);
            background-color: #3a3a3a;
            color: #e0e0e0;
            border: none;
            border-radius: 15px;
            padding: 15px 20px;
            font-size: 1em;
            cursor: pointer;
            text-align: center;
            text-decoration: none;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease-in-out, transform 0.2s ease, box-shadow 0.3s ease;
            z-index: 999;
            box-shadow: 
                inset 2px 2px 5px rgba(0, 0, 0, 0.3),
                inset -2px -2px 5px rgba(70, 70, 70, 0.1),
                5px 5px 10px rgba(0, 0, 0, 0.4),
                -5px -5px 10px rgba(70, 70, 70, 0.05);
        }

        #backToTopBtn:hover {
            background-color: #4a4a4a;
            transform: translateX(-50%) translateY(-5px) scale(1.05); /* More pronounced lift and scale */
            box-shadow: 
                inset 1px 1px 3px rgba(0, 0, 0, 0.4), 
                inset -1px -1px 3px rgba(70, 70, 70, 0.2),
                8px 8px 15px rgba(0, 0, 0, 0.6),
                -8px -8px 15px rgba(70, 70, 70, 0.1),
                0 0 20px rgba(255, 255, 255, 0.4); /* White glow */
        }

        #backToTopBtn.show {
            opacity: 1;
            pointer-events: auto;
        }

        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(0px); /* Initial state for blur transition */
            -webkit-backdrop-filter: blur(0px); /* Safari support */
        }

        .modal-overlay.show {
            opacity: 1;
            pointer-events: auto;
            backdrop-filter: blur(5px); /* Apply blur on show */
            -webkit-backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: #2c2c2c;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 
                inset 5px 5px 10px rgba(0, 0, 0, 0.3),
                inset -5px -5px 10px rgba(70, 70, 70, 0.1),
                10px 10px 20px rgba(0, 0, 0, 0.6),
                -10px -10px 20px rgba(70, 70, 70, 0.05);
            text-align: left;
            max-width: 600px;
            width: 90%; /* Default width */
            position: relative;
            transform: scale(0.9);
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            box-sizing: border-box; /* Crucial for consistent sizing */
        }

        .modal-overlay.show .modal-content {
            transform: scale(1);
            opacity: 1;
        }

        .modal-close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5em;
            color: #e0e0e0;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        .modal-close-btn:hover {
            color: #f44336;
        }

        .modal-content h2 {
            font-size: 2em;
            color: #ffffff;
            margin-bottom: 20px;
            text-align: center;
        }
        .modal-content p {
            font-size: 1em;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        .modal-content ul {
            list-style-type: disc;
            margin-left: 20px;
            margin-bottom: 15px;
        }
        .modal-content li {
            margin-bottom: 5px;
        }


        /* Keyframe Animations */
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes fade-in-scale {
            0% { opacity: 0; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1); }
        }

        @keyframes text-glow {
            0% { text-shadow: 0 0 5px rgba(255, 255, 255, 0.1); }
            50% { text-shadow: 0 0 15px rgba(255, 255, 255, 0.4); }
            100% { text-shadow: 0 0 5px rgba(255, 255, 255, 0.1); }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        @keyframes background-pulse {
            0% { background-color: #1a1a1a; }
            50% { background-color: #202020; }
            100% { background-color: #1a1a1a; }
        }

        @media (max-width: 768px) {
            .container {
                padding: 25px;
                gap: 30px;
            }
            h1 {
                font-size: 2.5em;
            }
            .navigation-buttons {
                flex-direction: column;
                gap: 20px;
                align-items: center;
            }
            .nav-button {
                width: calc(100% - 60px);
                max-width: 300px;
                min-width: unset;
                padding: 20px 30px;
            }
            .thumbnail-grid {
                grid-template-columns: 1fr;
            }
            .portfolio-section h2 {
                font-size: 2em;
            }
            .social-links {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            }
            .brainstormer-input-area textarea {
                width: 95%;
            }
            .brainstormer-buttons {
                flex-direction: column;
                width: 100%;
                max-width: 300px;
            }
            .brainstormer-button {
                width: 100%;
            }
            #backToTopBtn {
                bottom: 70px; /* Adjusted for smaller screens to clear footer */
                padding: 12px 15px;
                font-size: 0.9em;
            }
            .footer-buttons {
                flex-direction: column; /* Stack buttons vertically */
                gap: 10px;
                align-items: center; /* Center them */
            }
            .footer-button {
                width: 80%; /* Make them a percentage of available width */
                max-width: 250px; /* Cap their max width */
            }

            /* Modal adjustments for smaller screens */
            .modal-content {
                padding: 20px; /* Reduced padding */
                width: 95%; /* More of the screen width */
            }
            .modal-close-btn {
                top: 10px; /* Adjust close button position */
                right: 10px;
                font-size: 1.3em; /* Slightly smaller close button */
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            h1 {
                font-size: 2em;
            }
            .nav-button {
                padding: 15px 20px;
                width: calc(100% - 40px);
            }
            .nav-button img {
                width: 80px;
                height: 80px;
            }
            .social-button {
                padding: 15px 5px;
            }
            .social-button img {
                width: 40px;
                height: 40px;
            }
            .social-links {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }
            #backToTopBtn {
                bottom: 60px; /* Further adjusted */
            }
            .footer-button {
                width: 90%; /* Increase width for very small screens */
            }
            /* Further modal adjustments for very small screens */
            .modal-content {
                padding: 15px; /* Further reduce padding */
                width: 90%; /* Keep some margin on each side */
                min-height: unset; /* Allow height to adjust naturally */
                max-height: 85vh; /* Max height to prevent overflow */
                overflow-y: auto; /* Enable scrolling for long content */
            }
            .modal-close-btn {
                top: 8px; /* Fine-tune close button position */
                right: 8px;
                font-size: 1.1em; /* Make it smaller */
            }
        }

        @media (max-width: 320px) {
            .container {
                padding: 10px;
            }
            .nav-button {
                padding: 10px 15px;
                width: calc(100% - 30px);
            }
            .social-links {
                grid-template-columns: 1fr;
            }
            .social-button {
                width: calc(100% - 30px);
            }
            #backToTopBtn {
                bottom: 50px; /* Even further adjusted */
                padding: 10px 12px;
            }
        }
    </style>
</head>
<body>
    <canvas id="particleCanvas"></canvas>
    <canvas id="cursorTrailCanvas"></canvas> <div class="vignette-overlay"></div>

    <div class="container">
        <header>
            <div class="logo-container">
                <img src="https://media.discordapp.net/attachments/1377937684525224000/1377937709561024603/iflexnew.png?ex=683ac7fe&is=6839767e&hm=9f2c0f8ab97dd09a6807993e34dfb0286b00806463d673e68099253d4c0e805e&=&width=666&height=666" alt="iFlex Logo">
            </div>
            <h1>iFlex</h1> 
            <div class="status-indicator show-on-scroll">
                <span class="dot open"></span> available for hire
            </div>
            <div class="navigation-buttons show-on-scroll">
                <a href="#my-work-section" class="nav-button">
                    <img src="https://media.discordapp.net/attachments/1377937684525224000/1377952065749516348/document.png?ex=683ad55d&is=683983dd&hm=43fdf58fe7088528529a4454c74518b8896e985947e8918b3ffa1f623c9bdb87&=&width=461&height=461" alt="My Work Icon">
                    <p>My Work</p>
                </a>
                <a href="#contact-section" class="nav-button">
                    <img src="https://media.discordapp.net/attachments/1377937684525224000/1377951788019482685/external-link.png?ex=683ad51b&is=6839839b&hm=7eed749a4fc2c973d3ea107c8a3713dacee6bd36f8afa1fc2f30ed383d48943a&=&width=461&height=461" alt="Contact Icon">
                    <p>Links</p>
                </a>
                <a href="#brainstormer-section" class="nav-button">
                    <img src="https://media.discordapp.net/attachments/1377937684525224000/1377982009212932156/brain-512.png?ex=683af140&is=68399fc0&hm=044676c200334350cd26890993a4bd3e3f80c4b378704586c7155e5089238dc4&=&width=461&height=461" alt="Brainstormer Icon">
                    <p>Brainstormer</p>
                </a>
            </div>
        </header>

        <section id="my-work-section" class="portfolio-section show-on-scroll">
            <h2>My Work</h2>
            <div class="thumbnail-grid">
                <div class="thumbnail-item">
                    <img src="https://media.discordapp.net/attachments/1377937684525224000/1377940081532473425/1bgolf.png?ex=683aca34&is=683978b4&hm=643abea9a03dbeace78ebdd0b26367531f4c1107dc174bf1a2a8c8a864d22e39&=&width=495&height=278" alt="Thumbnail 1">
                    <p>The $1 Billion Golf Resort You’ve Probably Never Heard Of…</p>
                </div>
                <div class="thumbnail-item">
                    <img src="https://media.discordapp.net/attachments/1377937684525224000/1377950788982145145/Ep.2_V2.png?ex=683ad42d&is=683982ad&hm=6d8159c4413e449626dd14ede6c8218c4410813fd76880287d0e6c52b76bbe1a&=&width=1018&height=572" alt="Thumbnail 7">
                    <p>Developer Secrets & Future Updates | Combat Talk #2</p>
                </div>
                <div class="thumbnail-item">
                    <img src="https://media.discordapp.net/attachments/1377937684525224000/1377947775198564434/FALSEIDOLS_V3.jpg?ex=683ad15e&is=68397fde&hm=4e5299da6c146b574d4dbe3959687f50148a8314cd3e89a8dc5e0af164d8f517&=&width=1018&height=572" alt="Thumbnail 2">
                    <p>South Park's Take on Celebrity Culture & Endorsements</p>
                </div>
                <div class="thumbnail-item">
                    <img src="https://media.discordapp.net/attachments/1377937684525224000/1377948697287196744/zero_work_ethics_V2.jpg?ex=683ad23a&is=683980ba&hm=1d53d87af68196f901b515d35ffc91fe5227b4ec0b921636604846ad960de7d8&=&width=1018&height=572" alt="Thumbnail 3">
                    <p>When Your Work Ethic Goes Missing (South Park)</p>
                </div>
                <div class="thumbnail-item">
                    <img src="https://media.discordapp.net/attachments/1377937684525224000/1377949091996372993/No_affordable_housing.png?ex=683ad298&is=68398118&hm=2e81d648924cef1f4260028fb484d55090feecea0bd902447983c2ab635d8506&=&width=1018&height=572" alt="Thumbnail 4">
                    <p>South Park Explains: Why Can't Anyone Afford A House?!</p>
                </div>
                <div class="thumbnail-item">
                    <img src="https://media.discordapp.net/attachments/1377937684525224000/1377949654167326753/Shelbyv1.jpg?ex=683ad31e&is=6839819e&hm=437f0b79570f7b96c421bb664b799e3ff76f0ace3956bd8f08059c0a95ac7c4f&=&width=1018&height=572" alt="Thumbnail 5">
                    <p>The Most FRUSTRATING Gaming Experience EVER!</p>
                </div>
                <div class="thumbnail-item">
                    <img src="https://media.discordapp.net/attachments/1377937684525224000/1377950080325128307/EveryAgentShelbyREWORKV4.jpg?ex=683ad384&is=68398204&hm=505f241e2f13e836ddc0b49663e23f44bfe9d4361b3412cc461f704681ad1467&=&width=1018&height=572" alt="Thumbnail 6">
                    <p>I Played a Different Valorant Agent EVERY DAY For a Month! (Insane Challenge)</p>
                </div>
                </div>
        </section>

        <section id="brainstormer-section" class="portfolio-section show-on-scroll">
            <h2>Thumbnail Concept Brainstormer ✨</h2>
            <div class="brainstormer-input-area">
                <textarea id="videoTopicInput" placeholder="Enter video topic (e.g., 'DIY Home Renovation,' 'Epic Gaming Moments,' 'Travel Guide to Paris')"></textarea>
                <div class="brainstormer-buttons">
                    <button id="brainstormButton" class="brainstormer-button">Brainstorm Concepts ✨</button>
                    <button id="clearConceptsButton" class="brainstormer-button" style="background-color: #f44336;">Clear Concepts</button>
                </div>
            </div>
            <div id="loadingIndicator" class="loading-indicator">Generating concepts...</div>
            <div id="brainstormOutput" class="brainstormer-output-area">
                Your AI-generated thumbnail concepts will appear here.
            </div>

            <div id="savedConceptsSection" class="saved-concepts-section" style="display: none;">
                <h3>Saved Concepts</h3>
                <div id="savedConceptsList" class="saved-concepts-list">
                    <p>No concepts saved yet.</p>
                </div>
                <button id="clearAllSavedButton" class="clear-all-saved">Clear All Saved</button>
            </div>
        </section>

        <section id="contact-section" class="portfolio-section show-on-scroll">
            <h2>Links</h2>
            <div class="contact-info">
                <p class="email-address">ad.iflex@hotmail.com</p>
                <div class="social-links">
                    <a href="https://discord.com/invite/cPCEAPhcYy" target="_blank" class="social-button">
                        <img src="https://media.discordapp.net/attachments/1377937684525224000/1377943384341090334/discord.png?ex=683acd47&is=68397bc7&hm=08793e8425e816208f27e35e837691b07da619197c34425f6b45f638bb958a9a&=&width=461&height=461" alt="Discord Icon">
                        <p>Discord<br>iFlex</p>
                    </a>
                    <a href="https://x.com/SaiFlex_1" target="_blank" class="social-button">
                        <img src="https://cdn.discordapp.com/attachments/1377937684525224000/1377943660838129665/X_logo_2023_28white29.png?ex=683acd89&is=68397c09&hm=d5885d0497e3e14f77169c3ec649797d5be441fa5fe2e745ce1f5378d4e8af52&" alt="Twitter Icon">
                        <p>X<br>@SaiFlex_1</p>
                    </a>
                    <a href="https://www.youtube.com/@saiflex" target="_blank" class="social-button">
                        <img src="https://cdn.discordapp.com/attachments/1377937684525224000/1377943936470876190/youtube_button_PNG36.png?ex=683acdcb&is=68397c4b&hm=3c815bacf6f7cce19e2e1a7c79d8facbe14f06ceee1e97e72e5b3f3c3a742228&" alt="YouTube Icon">
                        <p>YouTube<br>iFlex</p>
                    </a>
                    <a href="https://www.paypal.com/paypalme/iflex8" target="_blank" class="social-button">
                        <img src="https://media.discordapp.net/attachments/1377937684525224000/1377944834328891423/PayPal-icon-white-png-vertical.png?ex=683acea1&is=68397d21&hm=dad3f0cbceff153c06875cfe6a87760e14b44f7cf812bec386809c14bc1900a7&=&width=545&height=666" alt="YTJobs Icon">
                        <p>PayPal<br>iflex8</p>
                    </a>
                    <a href="https://www.instagram.com/saiflex.8/" target="_blank" class="social-button">
                        <img src="https://media.discordapp.net/attachments/1377937684525224000/1377947136565710898/instagram-new.png?ex=683ad0c6&is=68397f46&hm=95af48594463e74b21916af65df71f078fa5514dbcfe0a735a0af1d57c0db412&=&width=461&height=461" alt="Instagram Icon">
                        <p>Instagram<br>@saiflex.8</p>
                    </a>
                </div>
            </div>
        </section>

        <footer class="show-on-scroll">
            <p>© 2025 iFlex. All rights reserved.</p>
            <div class="footer-buttons">
                <a href="#" id="legalBtn" class="footer-button">Legal</a>
                <a href="#" id="aboutBtn" class="footer-button">About</a>
            </div>
        </footer>
    </div>

    <div id="copyrightMessage" class="copyright-message">
        Content is protected. © iFlex. All rights reserved.
    </div>

    <button id="backToTopBtn">Back to Top</button>

    <div id="legalModal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close-btn">×</button>
            <h2>Legal Information</h2>
            <p>This website and its content are provided for informational and portfolio display purposes only. All intellectual property rights, including copyrights and trademarks, related to the "iFlex" brand and its original content, are reserved by iFlex.</p>
            <p>Any use, reproduction, or distribution of the content, including but not limited to images, text, and design elements, without explicit written permission from iFlex is strictly prohibited.</p>
            <p>The AI-generated content provided by the "Thumbnail Concept Brainstormer" is for creative inspiration only and should not be considered professional advice. iFlex is not responsible for any outcomes or consequences resulting from the use of the generated concepts.</p>
            <p>This site may contain links to third-party websites. iFlex is not responsible for the content or privacy practices of these external sites.</p>
            <p>By using this website, you agree to these terms and conditions.</p>
        </div>
    </div>

    <div id="aboutModal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close-btn">×</button>
            <h2>About iFlex</h2>
            <p>Welcome to iFlex, your hub for creative digital solutions! I specialize in crafting compelling visual content, particularly high-impact YouTube thumbnails designed to boost engagement and click-through rates.</p>
            <p>My passion lies in understanding the unique needs of content creators and translating their ideas into visually stunning and effective assets. With a keen eye for design and a strategic approach, I aim to help your content stand out in a crowded digital landscape.</p>
            <p>The "Thumbnail Concept Brainstormer" on this site is a testament to my commitment to innovation and efficiency, offering a glimpse into the creative process and providing instant inspiration.</p>
            <p>I'm always looking for exciting new projects and collaborations. Feel free to explore my work and reach out if you're ready to elevate your visual presence!</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const brainstormButton = document.getElementById('brainstormButton');
            const clearConceptsButton = document.getElementById('clearConceptsButton');
            const videoTopicInput = document.getElementById('videoTopicInput');
            const brainstormOutput = document.getElementById('brainstormOutput');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const copyrightMessage = document.getElementById('copyrightMessage');
            const backToTopBtn = document.getElementById('backToTopBtn');
            const legalBtn = document.getElementById('legalBtn');
            const aboutBtn = document.getElementById('aboutBtn');
            const legalModal = document.getElementById('legalModal');
            const aboutModal = document.getElementById('aboutModal');
            const modalCloseBtns = document.querySelectorAll('.modal-close-btn');
            const savedConceptsSection = document.getElementById('savedConceptsSection');
            const savedConceptsList = document.getElementById('savedConceptsList');
            const clearAllSavedButton = document.getElementById('clearAllSavedButton');

            // --- Modal Functions ---
            function openModal(modalElement) {
                modalElement.classList.add('show');
                document.body.classList.add('modal-open');
            }

            function closeModal(modalElement) {
                modalElement.classList.remove('show');
                document.body.classList.remove('modal-open');
            }

            legalBtn.addEventListener('click', (e) => {
                e.preventDefault();
                openModal(legalModal);
            });

            aboutBtn.addEventListener('click', (e) => {
                e.preventDefault();
                openModal(aboutModal);
            });

            modalCloseBtns.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const modalOverlay = e.target.closest('.modal-overlay');
                    if (modalOverlay) {
                        closeModal(modalOverlay);
                    }
                });
            });

            legalModal.addEventListener('click', (e) => {
                if (e.target === legalModal) {
                    closeModal(legalModal);
                }
            });
            aboutModal.addEventListener('click', (e) => {
                if (e.target === aboutModal) {
                    closeModal(aboutModal);
                }
            });

            // --- Brainstormer Functions ---
            brainstormButton.addEventListener('click', async () => {
                const topic = videoTopicInput.value.trim();
                if (!topic) {
                    brainstormOutput.innerHTML = "Please enter a video topic to brainstorm concepts.";
                    return;
                }

                loadingIndicator.classList.add('active');
                brainstormOutput.innerHTML = '';
                brainstormButton.disabled = true;

                try {
                    const response = await fetch('/.netlify/functions/brainstorm', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ topic: topic })
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(`Function error: ${response.status} ${response.statusText} - ${errorData.error || 'Unknown error'}`);
                    }

                    const result = await response.json();
                    brainstormOutput.innerHTML = result.concepts;

                    addConceptActionButtons();

                } catch (error) {
                    console.error("Error calling Netlify Function:", error);
                    brainstormOutput.innerHTML = `Error generating concepts: ${error.message}. Please try again.`;
                } finally {
                    loadingIndicator.classList.remove('active');
                    brainstormButton.disabled = false;
                }
            });

            clearConceptsButton.addEventListener('click', () => {
                videoTopicInput.value = '';
                brainstormOutput.innerHTML = 'Your AI-generated thumbnail concepts will appear here.';
            });

            // --- Copy and Save Logic for Brainstormer Output ---
            function addConceptActionButtons() {
                const concepts = brainstormOutput.querySelectorAll('p, li');

                concepts.forEach((conceptElement, index) => {
                    if (conceptElement.textContent.trim().length < 20) return; 

                    const buttonContainer = document.createElement('span');
                    buttonContainer.style.marginLeft = '15px';
                    buttonContainer.style.whiteSpace = 'nowrap';

                    const copyBtn = document.createElement('button');
                    copyBtn.textContent = 'Copy';
                    copyBtn.classList.add('copy-button');
                    copyBtn.onclick = () => {
                        copyTextToClipboard(conceptElement.textContent);
                        showCopyMessage(copyBtn);
                    };
                    buttonContainer.appendChild(copyBtn);

                    const saveBtn = document.createElement('button');
                    saveBtn.textContent = 'Save';
                    saveBtn.classList.add('copy-button');
                    saveBtn.style.backgroundColor = '#4CAF50';
                    saveBtn.style.marginLeft = '5px';
                    saveBtn.onclick = () => {
                        saveConcept(conceptElement.textContent);
                        showSaveMessage(saveBtn);
                    };
                    buttonContainer.appendChild(saveBtn);

                    conceptElement.appendChild(buttonContainer);
                });
            }

            function copyTextToClipboard(text) {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                try {
                    document.execCommand('copy');
                } catch (err) {
                    console.error('Failed to copy text: ', err);
                }
                document.body.removeChild(textarea);
            }

            function showCopyMessage(buttonElement) {
                let messageSpan = buttonElement.nextElementSibling;
                if (!messageSpan || !messageSpan.classList.contains('copy-message')) {
                    messageSpan = document.createElement('span');
                    messageSpan.classList.add('copy-message');
                    buttonElement.parentNode.insertBefore(messageSpan, buttonElement.nextSibling);
                }
                messageSpan.textContent = 'Copied!';
                messageSpan.classList.add('show');
                setTimeout(() => {
                    messageSpan.classList.remove('show');
                }, 1000);
            }

            function showSaveMessage(buttonElement) {
                let messageSpan = buttonElement.nextElementSibling;
                if (!messageSpan || !messageSpan.classList.contains('copy-message')) {
                    messageSpan = document.createElement('span');
                    messageSpan.classList.add('copy-message');
                    buttonElement.parentNode.insertBefore(messageSpan, buttonElement.nextSibling);
                }
                messageSpan.textContent = 'Saved!';
                messageSpan.classList.add('show');
                setTimeout(() => {
                    messageSpan.classList.remove('show');
                }, 1000);
            }

            // --- Local Storage for Saved Concepts ---
            let savedConcepts = JSON.parse(localStorage.getItem('iflexSavedConcepts')) || [];

            function saveConcept(conceptText) {
                if (!savedConcepts.includes(conceptText)) {
                    savedConcepts.push(conceptText);
                    localStorage.setItem('iflexSavedConcepts', JSON.stringify(savedConcepts));
                    renderSavedConcepts();
                }
            }

            function removeConcept(conceptText) {
                savedConcepts = savedConcepts.filter(concept => concept !== conceptText);
                localStorage.setItem('iflexSavedConcepts', JSON.stringify(savedConcepts));
                renderSavedConcepts();
            }

            function renderSavedConcepts() {
                if (savedConcepts.length > 0) {
                    savedConceptsSection.style.display = 'block';
                    savedConceptsList.innerHTML = savedConcepts.map((concept, index) => `
                        <p>${concept} <button class="remove-button" data-index="${index}">Remove</button></p>
                    `).join('');

                    savedConceptsList.querySelectorAll('.remove-button').forEach(button => {
                        button.addEventListener('click', (e) => {
                            const conceptToRemove = e.target.parentNode.textContent.replace(' Remove', '').trim();
                            removeConcept(conceptToRemove);
                        });
                    });
                } else {
                    savedConceptsSection.style.display = 'none';
                    savedConceptsList.innerHTML = '<p>No concepts saved yet.</p>';
                }
            }

            clearAllSavedButton.addEventListener('click', () => {
                savedConcepts = [];
                localStorage.removeItem('iflexSavedConcepts');
                renderSavedConcepts();
            });

            renderSavedConcepts();

            // --- Copyright Message ---
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();

                copyrightMessage.style.left = `${e.clientX + 10}px`;
                copyrightMessage.style.top = `${e.clientY + 10}px`;
                
                copyrightMessage.classList.add('show');

                setTimeout(() => {
                    copyrightMessage.classList.remove('show');
                }, 1500);
            });

            // --- Smooth Scrolling for Nav Buttons ---
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    // Only perform smooth scroll if the href is not just '#' (which is handled by modals)
                    if (href === '#') {
                        e.preventDefault(); 
                        return; 
                    }
                    e.preventDefault();

                    const targetElement = document.querySelector(href);
                    if (targetElement) { // Ensure the target element exists
                        targetElement.scrollIntoView({
                            behavior: 'smooth'
                        });
                    }
                });
            });

            // --- Back to Top Button Logic ---
            window.addEventListener('scroll', () => {
                if (window.scrollY > 300) {
                    backToTopBtn.classList.add('show');
                } else {
                    backToTopBtn.classList.remove('show');
                }
            });

            backToTopBtn.addEventListener('click', () => {
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            // --- Particle Background ---
            const particleCanvas = document.getElementById('particleCanvas');
            const particleCtx = particleCanvas.getContext('2d');
            let particles = [];
            const particleCount = 50; 
            const maxRadius = 1.5; 
            const minRadius = 0.5; 
            const maxSpeed = 0.3; 

            function resizeParticleCanvas() {
                particleCanvas.width = window.innerWidth;
                particleCanvas.height = window.innerHeight;
            }

            class Particle {
                constructor() {
                    this.x = Math.random() * particleCanvas.width;
                    this.y = Math.random() * particleCanvas.height;
                    this.radius = Math.random() * (maxRadius - minRadius) + minRadius;
                    this.color = `rgba(255, 255, 255, ${Math.random() * 0.2 + 0.05})`;
                    this.speedX = (Math.random() - 0.5) * maxSpeed;
                    this.speedY = (Math.random() - 0.5) * maxSpeed;
                }

                draw() {
                    particleCtx.beginPath();
                    particleCtx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                    particleCtx.fillStyle = this.color;
                    particleCtx.fill();
                }

                update() {
                    this.x += this.speedX;
                    this.y += this.speedY;

                    if (this.x < 0 - this.radius) this.x = particleCanvas.width + this.radius;
                    if (this.x > particleCanvas.width + this.radius) this.x = 0 - this.radius;
                    if (this.y < 0 - this.radius) this.y = particleCanvas.height + this.radius;
                    if (this.y > particleCanvas.height + this.radius) this.y = 0 - this.radius;
                }
            }

            function initParticles() {
                particles = [];
                for (let i = 0; i < particleCount; i++) {
                    particles.push(new Particle());
                }
            }

            function animateParticles() {
                requestAnimationFrame(animateParticles);
                particleCtx.clearRect(0, 0, particleCanvas.width, particleCanvas.height);

                particles.forEach(particle => {
                    particle.update();
                    particle.draw();
                });
            }

            resizeParticleCanvas();
            initParticles();
            animateParticles();
            window.addEventListener('resize', () => {
                resizeParticleCanvas();
                initParticles();
            });

            // --- Cursor Trail Particles ---
            const cursorTrailCanvas = document.getElementById('cursorTrailCanvas');
            const cursorTrailCtx = cursorTrailCanvas.getContext('2d');
            let cursorParticles = [];
            const cursorParticleMaxAge = 60; // frames
            const cursorParticleSize = 1;
            const cursorParticleDensity = 2; // how many particles per mousemove event

            function resizeCursorTrailCanvas() {
                cursorTrailCanvas.width = window.innerWidth;
                cursorTrailCanvas.height = window.innerHeight;
            }

            class CursorParticle {
                constructor(x, y) {
                    this.x = x;
                    this.y = y;
                    this.radius = cursorParticleSize;
                    this.alpha = 0.5; // Initial opacity
                    this.life = 0;
                    this.speedX = (Math.random() - 0.5) * 0.5; // Very subtle spread
                    this.speedY = (Math.random() - 0.5) * 0.5;
                }

                draw() {
                    cursorTrailCtx.beginPath();
                    cursorTrailCtx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                    cursorTrailCtx.fillStyle = `rgba(255, 255, 255, ${this.alpha})`; // White, fading
                    cursorTrailCtx.fill();
                }

                update() {
                    this.x += this.speedX;
                    this.y += this.speedY;
                    this.life++;
                    this.alpha = 0.5 - (this.life / cursorParticleMaxAge) * 0.5; // Fade out
                    if (this.alpha < 0) this.alpha = 0;
                }
            }

            function animateCursorTrail() {
                requestAnimationFrame(animateCursorTrail);
                cursorTrailCtx.clearRect(0, 0, cursorTrailCanvas.width, cursorTrailCanvas.height);

                for (let i = cursorParticles.length - 1; i >= 0; i--) {
                    cursorParticles[i].update();
                    if (cursorParticles[i].life >= cursorParticleMaxAge || cursorParticles[i].alpha <= 0) {
                        cursorParticles.splice(i, 1);
                    } else {
                        cursorParticles[i].draw();
                    }
                }
            }

            document.addEventListener('mousemove', (e) => {
                for (let i = 0; i < cursorParticleDensity; i++) {
                    cursorParticles.push(new CursorParticle(e.clientX, e.clientY));
                }
            });

            resizeCursorTrailCanvas();
            animateCursorTrail();
            window.addEventListener('resize', resizeCursorTrailCanvas);


            // --- Intersection Observer for Scroll Animations ---
            const observerOptions = {
                root: null, // viewport
                rootMargin: '0px',
                threshold: 0.1 // Trigger when 10% of the item is visible
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('active');
                        observer.unobserve(entry.target); // Stop observing once animated
                    }
                });
            }, observerOptions);

            document.querySelectorAll('.show-on-scroll').forEach(element => {
                observer.observe(element);
            });
        });
    </script>
</body>
</html>
