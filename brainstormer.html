<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iFlex - Brainstormer</title>
    <link rel="icon" href="images/iflexnew.png" type="image/png">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        /* Global Styles & Reset: Ensures full viewport coverage and consistent base */
        html, body {
            margin: 0;
            padding: 0;
            height: 100vh;
            width: 100vw;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
            background-color: #0d0d0d; /* Even darker base background */
            color: #e0e0e0; /* Light text for contrast */
            display: flex;
            flex-direction: column;
            justify-content: space-between; /* Pushes content to center, footer to bottom */
            align-items: center;
            overflow-x: hidden; /* Prevent horizontal scroll */
            overflow-y: auto; /* Allow vertical scrolling for content */
            scroll-behavior: smooth;
            cursor: url(images/cursor.png), auto; /* Custom cursor */
            position: relative;
        }

        /* Digital Grid Overlay: New background effect */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                linear-gradient(to right, rgba(17, 17, 17, 0.8) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(17, 17, 17, 0.8) 1px, transparent 1px);
            background-size: 40px 40px; /* Adjust grid density */
            animation: grid-pulse 15s ease-in-out infinite alternate;
            pointer-events: none;
            z-index: -1; /* Behind all content */
        }
        
        /* Subtle radial gradient for depth over grid */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(circle at center, rgba(20, 20, 20, 0) 0%, rgba(13, 13, 13, 0.8) 70%, rgba(13, 13, 13, 1) 100%);
            pointer-events: none;
            z-index: 0; /* Above grid, below content */
        }

        /* Particle Canvas: Dynamic background particles */
        #particleCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -2; /* Furthest back */
            pointer-events: none;
        }

        /* Main container for page content (brainstormer area) */
        .main-container {
            flex-grow: 1; /* Allows it to expand and fill space */
            width: 100%;
            max-width: 900px; /* Max width for readability */
            padding: clamp(60px, 8vh, 100px) clamp(20px, 5vw, 50px) clamp(40px, 6vh, 80px); /* Responsive padding */
            box-sizing: border-box;
            z-index: 2; /* Ensures content is above background elements */
            display: flex;
            flex-direction: column;
            align-items: center; /* Center content horizontally */
            text-align: center; /* Default text alignment for page title */
        }

        /* Page Title */
        .page-title {
            font-size: clamp(2.5em, 7vw, 4em);
            color: #4df1f1; /* Cyan glow for title */
            margin-bottom: clamp(30px, 5vh, 60px);
            letter-spacing: 2px;
            text-shadow: 0 0 15px rgba(77, 241, 241, 0.8), 0 0 30px rgba(77, 241, 241, 0.5);
            font-weight: 800;
            opacity: 0;
            transform: translateY(-20px);
            animation: slideIn 0.8s ease-out forwards, text-neon-glow 3s infinite alternate ease-in-out;
        }

        /* Brainstormer Container (main interactive area) */
        .brainstormer-container {
            background-color: rgba(25, 25, 25, 0.7); /* More transparent dark background */
            border-radius: 25px; /* More pronounced rounded corners */
            padding: clamp(25px, 5vw, 50px);
            box-shadow: 0 10px 30px rgba(0, 255, 255, 0.2), inset 0 0 20px rgba(0, 255, 255, 0.1); /* Cyan glow shadow */
            text-align: center;
            width: 100%;
            /* height: clamp(500px, 75vh, 800px); This was restrictive, removed to allow content to dictate height */
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 2;
            box-sizing: border-box;
            opacity: 0;
            transform: translateY(20px);
            animation: fadeIn 1s ease-out 0.3s forwards;
            backdrop-filter: blur(10px); /* Stronger frosted glass effect */
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(77, 241, 241, 0.3); /* Subtle cyan border */
        }

        /* Brainstormer Input Area */
        .brainstormer-input-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: clamp(15px, 3vw, 20px);
            margin-bottom: clamp(20px, 4vh, 40px);
        }
        .brainstormer-input-area textarea {
            width: 100%; /* Changed from 80% to 100% */
            max-width: 600px;
            padding: clamp(12px, 2vw, 15px);
            border-radius: 15px; /* More rounded */
            border: 1px solid rgba(77, 241, 241, 0.3);
            background-color: rgba(25, 25, 25, 0.6);
            color: #e0e0e0;
            font-size: clamp(0.95em, 1.8vw, 1.1em);
            resize: vertical;
            min-height: 80px;
            box-shadow: inset 0 0 10px rgba(0, 255, 255, 0.1);
            outline: none;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
            box-sizing: border-box;
        }
        .brainstormer-input-area textarea:focus {
            border-color: #4df1f1;
            box-shadow: inset 0 0 10px rgba(0, 255, 255, 0.3), 0 0 20px rgba(77, 241, 241, 0.5);
        }
        .brainstormer-input-area textarea::placeholder {
            color: #aaa;
            opacity: 0.8;
        }
        .brainstormer-buttons {
            display: flex;
            gap: clamp(15px, 3vw, 20px);
            justify-content: center;
            flex-wrap: wrap;
            width: 100%; /* Ensures buttons take full width for wrapping */
            max-width: 600px; /* Aligns with textarea max-width */
        }
        .brainstormer-button {
            background: linear-gradient(45deg, #4df1f1, #21c2c2); /* Cyan gradient */
            color: #0d0d0d;
            padding: clamp(12px, 2vw, 18px) clamp(25px, 5vw, 35px);
            border-radius: 20px;
            border: none;
            font-size: clamp(1em, 1.8vw, 1.1em);
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(77, 241, 241, 0.4);
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            text-transform: uppercase;
            flex-grow: 1; /* Allow buttons to grow */
            min-width: 150px; /* Minimum width for buttons */
            justify-content: center; /* Center content in button */
        }
        .brainstormer-button:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 12px 25px rgba(77, 241, 241, 0.6), inset 0 0 15px rgba(255, 255, 255, 0.2);
            filter: brightness(1.2);
        }
        .brainstormer-button:disabled {
            background: #333;
            cursor: not-allowed;
            box-shadow: none;
            transform: none;
            filter: none;
            color: #999;
        }
        .brainstormer-output-area {
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 20px;
            padding: clamp(15px, 3vw, 25px);
            text-align: left;
            max-height: 500px;
            overflow-y: auto;
            box-shadow: inset 0 0 10px rgba(0, 255, 255, 0.1);
            white-space: pre-wrap;
            word-wrap: break-word;
            color: #e0e0e0;
            font-size: clamp(0.9em, 1.8vw, 1em);
            line-height: 1.6;
            transition: box-shadow 0.3s ease;
            position: relative;
            border: 1px solid rgba(77, 241, 241, 0.1);
        }
        .loading-indicator {
            display: none;
            margin-top: 20px;
            color: #4df1f1;
            font-style: italic;
            font-size: clamp(1em, 2vw, 1.2em);
            animation: bounce 0.8s infinite alternate;
        }
        .loading-indicator.active {
            display: block;
        }

        .copy-button {
            background-color: rgba(50, 50, 50, 0.8);
            color: #4df1f1;
            border: 1px solid rgba(77, 241, 241, 0.3);
            border-radius: 8px;
            padding: 5px 10px;
            font-size: 0.8em;
            cursor: pointer;
            margin-left: 10px;
            transition: all 0.2s ease;
        }
        .copy-button:hover {
            background-color: rgba(70, 70, 70, 0.9);
            box-shadow: 0 0 10px rgba(77, 241, 241, 0.4);
            color: #ffffff;
        }
        .copy-message {
            display: inline-block;
            margin-left: 10px;
            color: #4df1f1; /* Cyan color */
            font-size: 0.8em;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .copy-message.show {
            opacity: 1;
        }
        
        .saved-concepts-section {
            margin-top: clamp(20px, 4vh, 30px);
            border-top: 1px solid rgba(77, 241, 241, 0.1);
            padding-top: clamp(20px, 4vh, 30px);
        }
        .saved-concepts-section h3 {
            font-size: clamp(1.5em, 3vw, 2em);
            color: #4df1f1;
            margin-bottom: clamp(15px, 3vw, 20px);
            text-shadow: 0 0 8px rgba(77, 241, 241, 0.4);
        }
        .saved-concepts-list {
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            padding: 15px;
            max-height: 300px;
            overflow-y: auto;
            text-align: left;
            box-shadow: inset 0 0 10px rgba(0, 255, 255, 0.08);
            border: 1px solid rgba(77, 241, 241, 0.08);
        }
        .saved-concepts-list p {
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px dashed rgba(255, 255, 255, 0.05);
            position: relative;
            color: #ddd;
            line-height: 1.5;
        }
        .saved-concepts-list p:last-child {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }
        .saved-concepts-list .remove-button {
            background-color: rgba(231, 76, 60, 0.8); /* Red for remove */
            color: #fff;
            border: none;
            border-radius: 5px;
            padding: 3px 8px;
            font-size: 0.7em;
            cursor: pointer;
            margin-left: 10px;
            transition: background-color 0.2s ease;
            position: absolute;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
        }
        .saved-concepts-list .remove-button:hover {
            background-color: #c0392b;
        }
        .clear-all-saved {
            background-color: rgba(231, 76, 60, 0.9);
            color: #ffffff;
            padding: 10px 20px;
            border-radius: 10px;
            border: none;
            font-size: 0.9em;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.4);
        }
        .clear-all-saved:hover {
            background-color: #c0392b;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.6);
        }

        /* Global Footer Styles */
        footer {
            width: 100%;
            text-align: center;
            font-size: clamp(0.7em, 1.5vw, 0.9em);
            color: #999;
            padding: clamp(10px, 1.5vh, 20px) 0;
            z-index: 2;
            background-color: #0d0d0d; /* Matches body background */
            position: relative;
            flex-shrink: 0;
            margin-top: auto; /* Pushes footer to bottom */
        }
        .footer-buttons {
            display: flex;
            justify-content: center;
            gap: clamp(10px, 2vw, 20px);
            margin-top: clamp(10px, 1.5vw, 15px);
            flex-wrap: wrap;
        }
        .footer-button {
            background-color: #1a1a1a;
            color: #e0e0e0;
            padding: clamp(8px, 1.5vw, 10px) clamp(15px, 3vw, 20px);
            border-radius: 10px;
            text-decoration: none;
            transition: background-color 0.3s ease, transform 0.2s ease, box-shadow 0.3s ease;
            box-shadow: inset 2px 2px 5px rgba(0, 0, 0, 0.3), inset -2px -2px 5px rgba(40, 40, 40, 0.1);
            font-size: 1em;
            white-space: nowrap;
            box-sizing: border-box;
        }
        .footer-button:hover {
            background-color: #2a2a2a;
            transform: translateY(-2px);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
        }

        /* Copyright message for right-click protection */
        .copyright-message {
            position: fixed;
            background-color: rgba(0, 0, 0, 0.8);
            color: #fff;
            padding: 8px 15px;
            border-radius: 8px;
            font-size: 0.9em;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
            pointer-events: none;
            white-space: nowrap;
        }
        .copyright-message.show {
            opacity: 1;
        }

        /* Modal Styles (for Legal information, opens on top of everything) */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8); /* Darker overlay */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1005; /* Highest z-index for modals */
            opacity: 0;
            pointer-events: none; /* Invisible and non-interactive by default */
            transition: opacity 0.3s ease;
            backdrop-filter: blur(8px); /* Blur effect */
            -webkit-backdrop-filter: blur(8px);
        }

        .modal-overlay.show {
            opacity: 1;
            pointer-events: auto; /* Becomes interactive when shown */
        }

        .modal-content {
            background-color: #1a1a1a; /* Darker modal background */
            border-radius: 20px;
            padding: clamp(20px, 5vw, 40px); /* Responsive padding */
            box-shadow:
                inset 5px 5px 10px rgba(0, 0, 0, 0.3),
                inset -5px -5px 10px rgba(70, 70, 70, 0.1),
                0 10px 30px rgba(0, 0, 0, 0.7); /* More prominent shadow */
            text-align: left;
            max-width: 700px; /* Increased max-width */
            width: 90%; /* Occupies 90% width on smaller screens */
            position: relative;
            transform: scale(0.8); /* Initial smaller scale for entrance animation */
            opacity: 0;
            transition: transform 0.3s ease, opacity 0.3s ease;
            box-sizing: border-box;
            max-height: 90vh; /* Allow content to scroll if too long */
            overflow-y: auto; /* Enable vertical scrolling */
            border: 1px solid rgba(77, 241, 241, 0.2); /* Subtle cyan border */
        }

        .modal-overlay.show .modal-content {
            transform: scale(1);
            opacity: 1;
        }

        .modal-close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: clamp(1.5em, 3vw, 2em);
            color: #e0e0e0;
            cursor: pointer;
            transition: color 0.2s ease;
        }
        .modal-close-btn:hover {
            color: #4df1f1; /* Cyan close button */
        }

        .modal-content h2 {
            font-size: clamp(1.8em, 4vw, 2.5em);
            color: #4df1f1; /* Cyan heading */
            margin-bottom: 20px;
            text-align: center;
        }
        .modal-content h3 {
            font-size: clamp(1.2em, 2.5vw, 1.6em);
            color: #ffffff;
            margin-top: 20px;
            margin-bottom: 10px;
        }
        .modal-content p {
            font-size: clamp(0.9em, 1.8vw, 1em);
            line-height: 1.6;
            margin-bottom: 15px;
        }
        .modal-content ul {
            list-style-type: disc;
            margin-left: 20px;
            margin-bottom: 15px;
            color: #ccc;
        }
        .modal-content li {
            margin-bottom: 5px;
        }
        .modal-content a {
            color: #4df1f1; /* Cyan links */
            text-decoration: none;
            transition: color 0.2s ease;
        }
        .modal-content a:hover {
            color: #21c2c2; /* Darker cyan on hover */
            text-decoration: underline;
        }

        /* Hamburger Menu & Overlay Navigation */
        .menu-toggle {
            position: fixed;
            top: clamp(20px, 4vh, 40px);
            right: clamp(20px, 4vw, 40px);
            z-index: 1004;
            background: none;
            border: none;
            color: #e0e0e0;
            font-size: clamp(1.8em, 3.5vw, 2.5em);
            cursor: pointer;
            padding: 10px;
            transition: transform 0.3s ease, color 0.3s ease, visibility 0.3s ease, opacity 0.3s ease;
            text-shadow: 0 0 10px rgba(0,0,0,0.5);
            touch-action: manipulation;
        }
        .menu-toggle:hover {
            transform: scale(1.1);
            color: #4df1f1;
        }
        .menu-toggle.hidden {
            visibility: hidden;
            opacity: 0;
            pointer-events: none;
        }

        .nav-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.98);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1003;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.4s ease, visibility 0.4s ease;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            pointer-events: none;
            padding-top: clamp(80px, 12vh, 120px); /* Space for close button */
            padding-bottom: clamp(40px, 8vh, 80px); /* Space at bottom */
            box-sizing: border-box;
        }
        .nav-overlay.open {
            opacity: 1;
            visibility: visible;
            pointer-events: auto;
        }
        .nav-overlay-close-btn {
            position: absolute;
            top: clamp(20px, 4vh, 40px);
            right: clamp(20px, 4vw, 40px);
            z-index: 1004;
            background: none;
            border: none;
            color: #e0e0e0;
            font-size: clamp(2.5em, 5vw, 3em);
            cursor: pointer;
            transition: transform 0.3s ease, color 0.3s ease;
            touch-action: manipulation;
        }
        .nav-overlay-close-btn:hover {
            transform: rotate(90deg);
            color: #4df1f1;
        }
        .nav-list {
            list-style: none;
            padding: 0;
            margin: 0;
            text-align: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            height: 100%;
        }
        .nav-list li {
            margin: clamp(10px, 2vh, 20px) 0; /* Adjusted: Reduced margin for closer buttons */
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }
        .nav-overlay.open .nav-list li {
            opacity: 1;
            transform: translateY(0);
        }
        .nav-overlay.open .nav-list li:nth-child(1) { transition-delay: 0.1s; }
        .nav-overlay.open .nav-list li:nth-child(2) { transition-delay: 0.2s; }
        .nav-overlay.open .nav-list li:nth-child(3) { transition-delay: 0.3s; }
        .nav-overlay.open .nav-list li:nth-child(4) { transition-delay: 0.4s; }
        .nav-overlay.open .nav-list li:nth-child(5) { transition-delay: 0.5s; }
        .nav-list a {
            color: #ffffff;
            text-decoration: none;
            font-size: clamp(2em, 5vw, 3em);
            font-weight: 700;
            letter-spacing: 1.5px;
            transition: color 0.3s ease, text-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
            display: inline-block;
            padding: 5px 0;
        }
        .nav-list a::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: -100%;
            width: 100%;
            height: 4px;
            background-color: #4df1f1; /* Cyan underline */
            transition: left 0.3s ease-out;
        }
        .nav-list a:hover::before {
            left: 0;
        }
        .nav-list a:hover {
            color: #4df1f1;
            text-shadow: 0 0 20px rgba(77, 241, 241, 0.8);
        }


        /* Keyframe Animations */
        @keyframes gradient-shift {
            0% { background-position: 0% 0%, 100% 100%; }
            100% { background-position: 100% 100%, 0% 0%; }
        }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        @keyframes text-neon-glow {
            0% { text-shadow: 0 0 5px rgba(77, 241, 241, 0.4), 0 0 10px rgba(77, 241, 241, 0.2); }
            50% { text-shadow: 0 0 20px rgba(77, 241, 241, 0.8), 0 0 40px rgba(77, 241, 241, 0.5); }
            100% { text-shadow: 0 0 5px rgba(77, 241, 241, 0.4), 0 0 10px rgba(77, 241, 241, 0.2); }
        }
        @keyframes typing-dots-reveal {
            0% { width: 0; }
            33% { width: 0.33em; }
            66% { width: 0.66em; }
            100% { width: 1em; }
        }
        @keyframes grid-pulse {
            0% { background-color: #0d0d0d; background-position: 0% 0%; }
            50% { background-color: #1a1a1a; background-position: 10% 10%; }
            100% { background-color: #0d0d0d; background-position: 0% 0%; }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }


        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .main-container {
                padding: clamp(40px, 6vh, 80px) clamp(15px, 4vw, 30px) clamp(30px, 5vh, 60px);
            }
            .page-title {
                font-size: clamp(2em, 6vw, 3.5em);
            }
            .brainstormer-container {
                padding: clamp(15px, 4vw, 40px);
            }
            .brainstormer-input-area textarea {
                width: 100%; /* Ensure it's full width on smaller screens */
                padding: 10px 15px;
            }
            .brainstormer-button {
                width: 100%; /* Buttons stack */
                padding: 12px 20px;
                font-size: 0.95em;
            }
            .brainstormer-output-area {
                font-size: clamp(0.85em, 1.7vw, 1em);
                padding: 10px 15px;
            }
            .saved-concepts-section h3 {
                font-size: clamp(1.2em, 2.5vw, 1.6em);
            }
            .saved-concepts-list {
                padding: 10px;
            }
            .saved-concepts-list p {
                font-size: clamp(0.8em, 1.6vw, 0.9em);
            }
            .clear-all-saved {
                font-size: 0.85em;
                padding: 8px 15px;
            }
        }

        @media (max-width: 480px) {
            .main-container {
                padding: clamp(30px, 5vh, 60px) clamp(10px, 3vw, 20px) clamp(20px, 4vh, 40px);
            }
            .page-title {
                font-size: clamp(1.8em, 5.5vw, 3em);
                margin-bottom: clamp(20px, 4vh, 40px);
            }
            .brainstormer-container {
                padding: clamp(10px, 3vw, 30px);
            }
            .brainstormer-input-area textarea {
                font-size: 0.85em;
            }
            .brainstormer-button {
                font-size: 0.85em;
            }
            .loading-indicator {
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <canvas id="particleCanvas"></canvas>

    <div class="main-container">
        <h1 class="page-title">Thumbnail Concept Brainstormer ✨</h1>
        <div class="brainstormer-container">
            <div class="brainstormer-input-area">
                <textarea id="videoTopicInput" placeholder="Enter video topic (e.g., 'DIY Home Renovation,' 'Epic Gaming Moments,' 'Travel Guide to Paris')"></textarea>
                <div class="brainstormer-buttons">
                    <button id="brainstormButton" class="brainstormer-button">Brainstorm Concepts ✨</button>
                    <button id="clearConceptsButton" class="brainstormer-button" style="background: linear-gradient(45deg, #E74C3C, #C0392B);">Clear Concepts</button>
                </div>
            </div>
            <div id="loadingIndicator" class="loading-indicator">Generating concepts...</div>
            <div id="brainstormOutput" class="brainstormer-output-area">
                Your AI-generated thumbnail concepts will appear here.
            </div>

            <div id="savedConceptsSection" class="saved-concepts-section" style="display: none;">
                <h3>Saved Concepts</h3>
                <div id="savedConceptsList" class="saved-concepts-list">
                    <p>No concepts saved yet.</p>
                </div>
                <button id="clearAllSavedButton" class="clear-all-saved">Clear All Saved</button>
            </div>
        </div>
    </div>

    <!-- Hamburger Menu Toggle (always fixed top-right) -->
    <button class="menu-toggle" id="menuToggle">
        <i class="fas fa-bars"></i>
    </button>

    <!-- Full-screen Navigation Overlay (appears when menu is toggled) -->
    <nav class="nav-overlay" id="navOverlay">
        <button class="nav-overlay-close-btn" id="navCloseBtn">
            <i class="fas fa-times"></i>
        </button>
        <ul class="nav-list">
            <li><a href="index.html">Home</a></li>
            <li><a href="portfolio.html">My Work</a></li>
            <li><a href="about.html">About Me</a></li>
            <li><a href="brainstormer.html">Brainstormer</a></li>
            <li><a href="son.html">My AI Son</a></li>
            <li><a href="links.html">Links</a></li>
        </ul>
    </nav>

    <!-- Legal Information & Privacy Policy Modal -->
    <div id="legalModal" class="modal-overlay">
        <div class="modal-content">
            <button class="modal-close-btn">×</button>
            <h2>Legal Information & Privacy Policy</h2>
            <h3>1. General Disclaimer</h3>
            <p>This website is a personal portfolio created and maintained by iFlex. Its purpose is to showcase my projects, skills, and interests in web development and AI. All content is provided for informational and demonstration purposes only.</p>

            <p>All original content on this site, including text, design, and custom code (excluding third-party libraries and services), is my intellectual property. Please do not reproduce or distribute without my explicit permission.</p>

            <p>This site may contain links to third-party websites. I am not responsible for the content or privacy practices of these external sites.</p>
            <p>By using this website, you agree to these terms and conditions.</p>

            <h3>2. AI Bot Disclaimer ("My AI Son")</h3>
            <p>The "My AI Son" bot featured on this site is an AI chatbot developed for demonstration and entertainment purposes only. It is powered by a third-party AI service, <a href="https://shapes.inc/" target="_blank" rel="noopener noreferrer">Shapes.inc</a>.</p>
            <ul>
                <li>The bot's responses are generated by artificial intelligence and may be inaccurate, incomplete, or offensive.</li>
                <li>Do not share any sensitive personal, financial, or confidential information with the bot.</li>
                <li>The bot is not intended to provide professional advice (e.g., legal, medical, financial).</li>
                <li>I am not responsible for any outcomes or consequences resulting from the use of the bot's responses.</li>
            </ul>

            <h3>3. Privacy Policy</h3>
            <p>Your privacy is important to me. This section outlines how data is handled on this personal portfolio site.</p>

            <h4>Information Collection & Use:</h4>
            <ul>
                <li>
                    <strong>No Direct Personal Data Collection:</strong> This website does not directly collect any personally identifiable information (e.g., your name, email address, IP address) from visitors, other than what you voluntarily provide through interactions with the AI bot.
                </li>
                <li>
                    <strong>AI Bot Interaction Data:</strong> When you interact with the "My AI Son" bot:
                    <ul>
                        <li>Your messages are sent to a third-party AI service, <strong>Shapes.inc</strong>. Shapes.inc processes these messages to generate responses and maintain conversation context. Please refer to <strong>Shapes.inc's own privacy policy</strong> for detailed information on their data collection, storage, and usage practices.</li>
                        <li>To maintain your individual conversation context, a unique User ID and Channel ID is generated and stored locally in your browser's `localStorage`. This information is used solely to differentiate your chat sessions and is not linked to any personal data collected by me. These IDs can be reset by clearing your browser's data or by using the "Reset Chat" button on the bot page.</li>
                    </ul>
                </li>
                <li>
                    <strong>Analytics (Optional - if you add any):</strong> If this site were to use web analytics services (like Google Analytics in the future), only anonymized usage data would be collected to understand site performance and visitor behavior. No personally identifiable information would be shared.
                </li>
            </ul>

            <h4>Data Storage & Security:</h4>
                <p>No user data is stored on my personal servers. Information processed by the AI bot is handled by Shapes.inc. Local browser storage (`localStorage`) is used for user/channel IDs as described above.</p>

                <h4>Your Choices:</h4>
                <p>You can clear your browser's `localStorage` at any time to remove the locally stored User ID and Channel ID, which will start a new chat session with the bot.</p>

            <h3>4. Contact Information</h3>
            <p>If you have any questions or concerns regarding this website or its privacy practices, please feel free to contact me at:</p>
            <p>Email: <a href="mailto:ad.iflex@hotmail.com">ad.iflex@hotmail.com</a></p>
                <p>Last Updated: June 2, 2025</p>
            </div>
        </div>

    <!-- Global Footer -->
    <footer>
        <p>© 2025 iFlex. All rights reserved.</p>
        <div class="footer-buttons">
            <a href="#" id="legalBtn" class="footer-button">Legal</a>
        </div>
    </footer>

    <!-- Copyright message for right-click protection -->
    <div id="copyrightMessage" class="copyright-message">
        Content is protected. © iFlex. All rights reserved.
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const videoTopicInput = document.getElementById('videoTopicInput');
            const brainstormButton = document.getElementById('brainstormButton');
            const clearConceptsButton = document.getElementById('clearConceptsButton');
            const brainstormOutput = document.getElementById('brainstormOutput');
            const loadingIndicator = document.getElementById('loadingIndicator');
            const savedConceptsSection = document.getElementById('savedConceptsSection');
            const savedConceptsList = document.getElementById('savedConceptsList');
            const clearAllSavedButton = document.getElementById('clearAllSavedButton');

            // Navigation and Modal Elements
            const menuToggle = document.getElementById('menuToggle');
            const navOverlay = document.getElementById('navOverlay');
            const navCloseBtn = document.getElementById('navCloseBtn');
            const navLinks = document.querySelectorAll('.nav-list a');
            const legalBtn = document.getElementById('legalBtn');
            const legalModal = document.getElementById('legalModal');
            const modalCloseBtns = document.querySelectorAll('.modal-close-btn');
            const copyrightMessage = document.getElementById('copyrightMessage');
            const body = document.body;

            // --- Brainstormer Functionality ---
            brainstormButton.addEventListener('click', async () => {
                const topic = videoTopicInput.value.trim();
                if (!topic) {
                    brainstormOutput.innerHTML = `<p style="color: #E74C3C;">Please enter a video topic to brainstorm concepts.</p>`;
                    return;
                }

                loadingIndicator.classList.add('active');
                brainstormOutput.innerHTML = ''; // Clear previous output
                brainstormButton.disabled = true;

                try {
                    const response = await fetch('/.netlify/functions/brainstormer-js', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ topic: topic })
                    });

                    // Check if the response is OK (status 200-299)
                    if (!response.ok) {
                        let errorMessage = `API error: ${response.status} - ${response.statusText}`;
                        try {
                            const errorData = await response.json();
                            errorMessage += `: ${errorData.error || 'Unknown error'}`;
                        } catch (e) {
                            errorMessage += `. Non-JSON error response received.`;
                        }
                        throw new Error(`${errorMessage}. Please ensure your GEMINI_API_KEY is correctly set as an environment variable in Netlify and check Netlify function logs for more details.`);
                    }

                    // Explicitly check Content-Type header before parsing as JSON
                    const contentType = response.headers.get("content-type");
                    if (!contentType || !contentType.includes("application/json")) {
                        const textResponse = await response.text(); // Get raw text to inspect
                        throw new Error(`Unexpected response format. Expected JSON, received: ${contentType || 'no content-type'}. Raw response (first 200 chars): "${textResponse.substring(0, 200)}..."`);
                    }

                    const result = await response.json();
                    if (result.concepts) {
                        brainstormOutput.innerHTML = result.concepts;
                        addConceptActionButtons();
                    } else {
                        throw new Error('Unexpected API response structure: "concepts" field missing.');
                    }


                } catch (error) {
                    console.error("Error calling Netlify Function:", error);
                    brainstormOutput.innerHTML = `<p style="color: #E74C3C;">Error generating concepts: ${error.message}. Please try again later.</p>`;
                } finally {
                    loadingIndicator.classList.remove('active');
                    brainstormButton.disabled = false;
                }
            });

            clearConceptsButton.addEventListener('click', () => {
                videoTopicInput.value = '';
                brainstormOutput.innerHTML = 'Your AI-generated thumbnail concepts will appear here.';
            });

            function addConceptActionButtons() {
                const concepts = brainstormOutput.querySelectorAll('p, li');

                concepts.forEach((conceptElement, index) => {
                    if (conceptElement.textContent.trim().length < 20) return; 

                    if (conceptElement.querySelector('.copy-button')) return;

                    const buttonContainer = document.createElement('span');
                    buttonContainer.style.marginLeft = '15px';
                    buttonContainer.style.whiteSpace = 'nowrap';

                    const copyBtn = document.createElement('button');
                    copyBtn.textContent = 'Copy';
                    copyBtn.classList.add('copy-button');
                    copyBtn.onclick = () => {
                        copyTextToClipboard(conceptElement.textContent);
                        showCopyMessage(copyBtn);
                    };
                    buttonContainer.appendChild(copyBtn);

                    const saveBtn = document.createElement('button');
                    saveBtn.textContent = 'Save';
                    saveBtn.classList.add('copy-button');
                    saveBtn.style.background = 'linear-gradient(45deg, #4CAF50, #45a049)';
                    saveBtn.style.color = '#fff';
                    saveBtn.style.marginLeft = '5px';
                    saveBtn.onclick = () => {
                        saveConcept(conceptElement.textContent.replace(' Copy Save', '').trim());
                        showSaveMessage(saveBtn);
                    };
                    buttonContainer.appendChild(saveBtn);

                    conceptElement.appendChild(buttonContainer);
                });
            }

            function copyTextToClipboard(text) {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                try {
                    document.execCommand('copy');
                } catch (err) {
                    console.error('Failed to copy text: ', err);
                }
                document.body.removeChild(textarea);
            }

            function showCopyMessage(buttonElement) {
                let messageSpan = buttonElement.nextElementSibling;
                if (!messageSpan || !messageSpan.classList.contains('copy-message')) {
                    messageSpan = document.createElement('span');
                    messageSpan.classList.add('copy-message');
                    buttonElement.parentNode.insertBefore(messageSpan, buttonElement.nextSibling);
                }
                messageSpan.textContent = 'Copied!';
                messageSpan.classList.add('show');
                setTimeout(() => {
                    messageSpan.classList.remove('show');
                }, 1000);
            }

            function showSaveMessage(buttonElement) {
                let messageSpan = buttonElement.nextElementSibling;
                if (!messageSpan || !messageSpan.classList.contains('copy-message')) {
                    messageSpan = document.createElement('span');
                    messageSpan.classList.add('copy-message');
                    buttonElement.parentNode.insertBefore(messageSpan, buttonElement.nextSibling);
                }
                messageSpan.textContent = 'Saved!';
                messageSpan.classList.add('show');
                setTimeout(() => {
                    messageSpan.classList.remove('show');
                }, 1000);
            }

            // Local Storage for Saved Concepts
            let savedConcepts = JSON.parse(localStorage.getItem('iflexSavedConcepts')) || [];

            function saveConcept(conceptText) {
                if (!savedConcepts.includes(conceptText)) {
                    savedConce
